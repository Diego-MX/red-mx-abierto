.row{ 'ng-controller' => 'activitiesCtrl as activities' }
  %br
  -# Check if this is a first time user
  = render 'first_time_user'

  .row{ style: 'margin-bottom:15px;'}
    .col-sm-5
    .col-sm-7
      %p.pull-right
        = raw t('.current_step', last_step: @last_activity.step.name)
  -# Activities checklist rendering
  - if @stages.any?
    .btn-group.btn-group-justified{ role: 'group' }
      - @stages.each do |stage|
        %a.btn.btn-default{'href' => "#tab#{stage.id}", 'data-toggle' => 'tab' }
          %div{ 'data-toggle' => "tooltip", 'data-placement' => "left", 'title' => "#{stage.name}" }
            = truncate stage.name

    .tab-content
      - @stages.tap do |head, *body|
        -# First element should be selected
        .tab-pane.fade.in.active{ id: "tab#{head.id}" }
          = render 'steps_listing', steps: head.steps

        -# Remaining elements
        - body.each do |stage|
          .tab-pane.fade.in{ id: "tab#{stage.id}" }
            = render 'steps_listing', steps: stage.steps

  - else
    .jumbotron.text-center.slight-top-margin
      %p= t('.no_stages')
